<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script> src = "https://code.jquery.com/jquery-3.2.1.min.js"</script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <title>Survey Questions</title>
</head>

<body style="background-image: url(https://i.pinimg.com/originals/c7/9c/66/c79c6663fb7c31f1d6dc117e8df2c0b7.jpg)">
    <div class="container content">
        <br>
        <div class="jumbotron">
            <h2 class="text-center">Survey Questions</h2>
        </div>

        <div class="jumbotron">
            <h3 class="text-center">About You</h3>
            <hr>
            <form role="form" id="friend-form">
                <div class="form-group">
                    <label for="input-name">Name (Required)</label>
                    <input type="text" class="form-control" placeholder="Name" id="name">
                </div>
                <br>
                <div class="form-group">
                    <label for="photo">Link to Photo Image (Required)</label>
                    <input type="text" class="form-control" placeholder="Profile Photo Link" id="photo">
                </div>
                <hr>

                <div class="form-group">
                    <div class="row">
                        <div class="col-md-6">
                            <h5><label for="input-name">Question 1</label></h5>
                            <label>What sport do you prefer watching?</label>
                            <select id="q1" class="form-control">
                                <option>Choose an option</option>
                                <option value="1">1 (Soccer)</option>
                                <option value="2">2 (Baseball)</option>
                                <option value="3">4 (Football)</option>
                                <option value="4">4 (Basketball)</option>
                                <option value="5">5 (Golf)</option>
                            </select>
                        </div>

                        <div class="col-md-6">
                            <h5><label for="input-name">Question 2</label></h5>
                            <label>What would you do in your spare time?</label>
                            <select id="q2" class="form-control">
                                <option>Choose an option</option>
                                <option value="1">1 (Travel)</option>
                                <option value="2">2 (Hanging out with friends)</option>
                                <option value="3">3 (Bar Hopping)</option>
                                <option value="4">4 (Watching sports)</option>
                                <option value="5">5 (Playing video games)</option>
                            </select>
                        </div>
                    </div>
                    <br>

                    <div class="row">
                        <div class="col-md-6">
                            <h5><label for="input-name">Question 3</label></h5>
                            <label>What's music genre appeals to you?</label>
                            <select id="q3" class="form-control">
                                <option>Choose an option</option>
                                <option value="1">1 (Indie)</option>
                                <option value="2">2 (Rock)</option>
                                <option value="3">3 (Rap)</option>
                                <option value="4">4 (Hip-Hop)</option>
                                <option value="5">5 (Jazz)</option>
                            </select>
                        </div>

                        <div class="col-md-6">
                            <h5><label for="input-name">Question 4</label></h5>
                            <label>What video game seems more enjoyable?</label>
                            <select id="q4" class="form-control">
                                <option>Choose an option</option>
                                <option value="1">1 (Tetris)</option>
                                <option value="2">2 (Angry Birds)</option>
                                <option value="3">3 (Call of Duty)</option>
                                <option value="4">4 (FIFA Soccer 20)</option>
                                <option value="5">5 (Pokemon Sword)</option>
                            </select>
                        </div>
                    </div>
                    <br>

                    <div class="row">
                        <div class="col-md-6">
                            <h5><label for="input-name">Question 5</label></h5>
                            <label>Which job is more appealing to you?</label>
                            <select id="q5" class="form-control">
                                <option>Choose an option</option>
                                <option value="1">1 (Teacher)</option>
                                <option value="2">2 (Sports Coach)</option>
                                <option value="3">3 (Doctor)</option>
                                <option value="4">4 (Policeman)</option>
                                <option value="5">5 (Accountant)</option>
                            </select>
                        </div>

                        <div class="col-md-6">
                            <h5><label for="input-name">Question 6</label></h5>
                            <label>Which of these foods would you eat?</label>
                            <select id="q6" class="form-control">
                                <option>Choose an option</option>
                                <option value="1">1 (Paella)</option>
                                <option value="2">2 (Lasagna)</option>
                                <option value="3">3 (BBQ Chicken)</option>
                                <option value="4">4 (Tomahawk Steak)</option>
                                <option value="5">5 (Porcetta)</option>
                            </select>
                        </div>
                    </div>
                    <br>

                    <div class="row">
                        <div class="col-md-6">
                            <h5><label for="input-name">Question 7</label></h5>
                            <label>What subject are you more interested in?</label>
                            <select id="q7" class="form-control">
                                <option>Choose an option</option>
                                <option value="1">1 (Math)</option>
                                <option value="2">2 (Science)</option>
                                <option value="3">3 (History)</option>
                                <option value="4">4 (Physical Education)</option>
                                <option value="5">5 (Language Arts)</option>
                            </select>
                        </div>

                        <div class="col-md-6">
                            <h5><label for="input-name">Question 8</label></h5>
                            <label>What show would you rather watch?</label>
                            <select id="q8" class="form-control">
                                <option>Choose an option</option>
                                <option value="1">1 (Game of Thrones)</option>
                                <option value="2">2 (Breaking Bad)</option>
                                <option value="3">3 (Friends)</option>
                                <option value="4">4 (Seinfeld)</option>
                                <option value="5">5 (Rick and Morty)</option>
                            </select>
                        </div>
                    </div>
                    <br>

                    <div class="row">
                        <div class="col-md-6">
                            <h5><label for="input-name">Question 9</label></h5>
                            <label>What phone would you rather have?</label>
                            <select id="q9" class="form-control">
                                <option>Choose an option</option>
                                <option value="1">1 (Samsung Galaxy)</option>
                                <option value="2">2 (Apple IPhone)</option>
                                <option value="3">3 (Sony XPeria)</option>
                                <option value="4">4 (Google Pixel)</option>
                                <option value="5">5 (ASUS Gaming Phone)</option>
                            </select>
                        </div>

                        <div class="col-md-6">
                            <h5><label for="input-name">Question 10</label></h5>
                            <label>Which computer brand would you buy?</label>
                            <select id="q10" class="form-control">
                                <option>Choose an option</option>
                                <option value="1">1 (Macbook)</option>
                                <option value="2">2 (MSI)</option>
                                <option value="3">3 (HP)</option>
                                <option value="4">4 (Razer)</option>
                                <option value="5">5 (Dell)</option>
                            </select>
                        </div>
                    </div>
                    <br>
                    <hr>
            </form>

            <div class="text-center">
                <button type="submit" class="btn btn-primary btn-lg btn-block" data-toggle="modal"
                    id="submit-form">Submit</button>
            </div>

        </div>

    </div>
    <br>

    <div id="results-modal" class="modal fade" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Here's Your New Best Friend</h1>
                        <button type="button" class="close" d="close-modal" data-dismiss="modal"
                            aria-label="Close"><span aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body">
                    <h4 id="best-friend"></h4>
                    <img id="best-friend-photo" src="#">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <footer class="jumbotron , text-center">
        <h5> © 2019 Copyright Alexander Rocha</h5>
    </footer>

    <script type="text/javascript">

        // On click function
        $("#submit-form").on("click", function (event) {
            event.preventDefault();

            // Form validation
            var valid = true;

            if ($("#name").val() === "" || $("#photo").val() === "") {
                valid = false;

            } else if (
                $("#q1").val() === "empty" || $("#q2").val() === "empty" ||
                $("#q3").val() === "empty" || $("#q4").val() === "empty" ||
                $("#q5").val() === "empty" || $("#q6").val() === "empty" ||
                $("#q7").val() === "empty" || $("#q8").val() === "empty" ||
                $("#q9").val() === "empty" || $("#q10").val() === "empty") {
                valid = false;
            }

            // Create variables for user data sent by survey questions
            if (valid === true) {
                var userInput = {
                    name: $("#name").val().trim(),
                    photo: $("#photo").val().trim(),
                    scores: [
                        $("#q1").val(),
                        $("#q2").val(),
                        $("#q3").val(),
                        $("#q4").val(),
                        $("#q5").val(),
                        $("#q6").val(),
                        $("#q7").val(),
                        $("#q8").val(),
                        $("#q9").val(),
                        $("#q10").val(),
                    ]
                };

                var currentURL = window.location.origin;

                // Ajax call for receiving response after POST req
                $.post(currentURL + "/api/friends", userInput, function (data) {

                    // Grab the result from the AJAX post so that the best match's name and photo are displayed.
                    $("#best-friend").text(data.name);
                    $("#best-friend-photo").attribute("src", data.photo);
                    $("#results-modal").modal("toggle");
                });
            } else {
                // If a required field is missing, show an alert
                alert("Survey is not completed! You must fill out all of the options if you are to find your new best friend!");
            }
        });

    </script>

</body>

</html>